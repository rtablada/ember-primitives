{"version":3,"file":"setup.js","sources":["../../../src/services/ember-primitives/setup.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport Service from '@ember/service';\n\nimport { createTabster, getDeloser, getMover, getTabster } from 'tabster';\n\n/**\n * @internal\n */\nexport const PRIMITIVES = Symbol.for('ember-primitives-globals');\n\nexport default class EmberPrimitivesSetup extends Service {\n  /**\n   * Sets up required features for accessibility.\n   */\n  setup = ({\n    tabster,\n    setTabsterRoot,\n  }: {\n    /**\n     * Let this setup function initalize tabster.\n     * https://tabster.io/docs/core\n     *\n     * This should be done only once per application as we don't want\n     * focus managers fighting with each other.\n     *\n     * Defaults to `true`,\n     *\n     * Will fallback to an existing tabster instance automatically if `getTabster` returns a value.\n     */\n    tabster?: boolean;\n    setTabsterRoot?: boolean;\n  } = {}) => {\n    tabster ??= true;\n    setTabsterRoot ??= true;\n\n    if (!tabster) {\n      return;\n    }\n\n    let existing = getTabster(window);\n\n    this.#setupTabster(existing ?? createTabster(window));\n\n    if (setTabsterRoot) {\n      document.body.setAttribute('data-tabster', '{ \"root\": {} }');\n    }\n  };\n\n  #setupTabster = (tabster: ReturnType<typeof createTabster>) => {\n    getMover(tabster);\n    getDeloser(tabster);\n  };\n}\n"],"names":["PRIMITIVES","Symbol","for","EmberPrimitivesSetup","Service","setup","tabster","setTabsterRoot","existing","getTabster","window","createTabster","document","body","setAttribute","getMover","getDeloser"],"mappings":";;;AAAA;;AAKA;AACA;AACA;AACO,MAAMA,UAAU,GAAGC,MAAM,CAACC,GAAG,CAAC,0BAA0B,EAAC;AAEjD,MAAMC,oBAAoB,SAASC,OAAO,CAAC;AACxD;AACF;AACA;AACEC,EAAAA,KAAK,GAAGA,CAAC;IACPC,OAAO;AACPC,IAAAA,cAAAA;GAeD,GAAG,EAAE,KAAK;AACTD,IAAAA,OAAO,KAAK,IAAI,CAAA;AAChBC,IAAAA,cAAc,KAAK,IAAI,CAAA;IAEvB,IAAI,CAACD,OAAO,EAAE;AACZ,MAAA,OAAA;AACF,KAAA;AAEA,IAAA,IAAIE,QAAQ,GAAGC,UAAU,CAACC,MAAM,CAAC,CAAA;IAEjC,IAAI,CAAC,aAAa,CAACF,QAAQ,IAAIG,aAAa,CAACD,MAAM,CAAC,CAAC,CAAA;AAErD,IAAA,IAAIH,cAAc,EAAE;MAClBK,QAAQ,CAACC,IAAI,CAACC,YAAY,CAAC,cAAc,EAAE,gBAAgB,CAAC,CAAA;AAC9D,KAAA;GACD,CAAA;EAED,aAAa,GAAIR,OAAyC,IAAK;IAC7DS,QAAQ,CAACT,OAAO,CAAC,CAAA;IACjBU,UAAU,CAACV,OAAO,CAAC,CAAA;GACpB,CAAA;AACH;;;;"}
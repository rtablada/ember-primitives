{"version":3,"file":"link.js","sources":["../../src/components/link.gts"],"sourcesContent":["/**\n * TODO: make template-only component,\n * and use class-based modifier?\n *\n * This would require that modifiers could run pre-render\n */ import { template } from \"@ember/template-compiler\";\nimport { hash } from '@ember/helper';\nimport { on } from '@ember/modifier';\nimport { link } from '../helpers/link.ts';\nimport { ExternalLink } from './external-link.gts';\nimport type { TOC } from '@ember/component/template-only';\nexport interface Signature {\n    Element: HTMLAnchorElement;\n    Args: {\n        /**\n     * the `href` string value to set on the anchor element.\n     */ href: string;\n        /**\n     * When calculating the \"active\" state of the link, you may decide\n     * whether or not you want to _require_ that all query params be considered (true)\n     * or specify individual query params, ignoring anything not specified.\n     *\n     * For example:\n     *\n     * ```gjs live preview\n     * import { Link } from 'ember-primitives';\n     *\n     * <template>\n     *   <Link @href=\"/\" @includeActiveQueryParams={{true}} as |a|>\n     *     ...\n     *   </Link>\n     * </template>\n     * ```\n     *\n     * the data-active state here will only be \"true\" on\n     * - `/`\n     * - `/?foo=2`\n     * - `/?foo=&bar=`\n     *\n     */ includeActiveQueryParams?: true | string[];\n    };\n    Blocks: {\n        default: [{\n                /**\n         * Indicates if the passed `href` is pointing to an external site.\n         * Useful if you want your links to have additional context for when\n         * a user is about to leave your site.\n         *\n         * For example:\n         *\n         * ```gjs live preview\n         * import { Link } from 'ember-primitives';\n         *\n         * const MyLink = <template>\n         *   <Link @href={{@href}} as |a|>\n         *     {{yield}}\n         *     {{#if a.isExternal}}\n         *       âžš\n         *     {{/if}}\n         *   </Link>\n         * </template>;\n         *\n         * <template>\n         *   <MyLink @href=\"https://developer.mozilla.org\">MDN</MyLink> &nbsp;&nbsp;\n         *   <MyLink @href=\"/\">Home</MyLink>\n         *  </template>\n         * ```\n         */ isExternal: boolean;\n                /**\n         * Indicates if the passed `href` is *active*, or the user is on the same basepath.\n         * This allows consumers to style their link if they wish or style their text.\n         * The active state will also be present on a `data-active` attribute on the generated anchor tag.\n         *\n         *\n         * For example\n         * ```gjs\n         * import { Link, service } from 'ember-primitives';\n         *\n         * const MyLink = <template>\n         *   <Link @href=\"...\"> as |a|>\n         *     <span class=\"{{if a.isActive 'underline'}}\">\n         *     {{yield}}\n         *     </span>\n         *   </Link>\n         * </template>\n         *\n         * <template>\n         * {{#let (service 'router') as |router|}}\n         *     <MyLink @href={{router.currentURL}}>Ths page</MyLink> &nbsp;&nbsp;\n         *     <MyLink @href=\"/\">Home</MyLink>\n         *   {{/let}}\n         *  </template>\n         * ```\n         *\n         * By default, the query params are omitted from `isActive` calculation, but you may\n         * configure the query params to be included if you wish\n         * See: `@includeActiveQueryParams`\n         *\n         * Note that external links are never active.\n         */ isActive: boolean;\n            }];\n    };\n}\n/**\n * A light wrapper around the [Anchor element][mdn-a], which will appropriately make your link an external link if the passed `@href` is not on the same domain.\n *\n *\n * [mdn-a]: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a\n */ export const Link: TOC<Signature> = template(`\n  {{#let (link @href includeActiveQueryParams=@includeActiveQueryParams) as |l|}}\n    {{#if l.isExternal}}\n      <ExternalLink href={{@href}} ...attributes>\n        {{yield (hash isExternal=true isActive=false)}}\n      </ExternalLink>\n    {{else}}\n      <a\n        data-active={{l.isActive}}\n        href={{if @href @href \"##missing##\"}}\n        {{on \"click\" l.handleClick}}\n        ...attributes\n      >\n        {{yield (hash isExternal=false isActive=l.isActive)}}\n      </a>\n    {{/if}}\n  {{/let}}\n`, {\n    eval () {\n        return eval(arguments[0]);\n    }\n});\nexport default Link;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3JrL2VtYmVyLXByaW1pdGl2ZXMvZW1iZXItcHJpbWl0aXZlcy9lbWJlci1wcmltaXRpdmVzL3NyYy9jb21wb25lbnRzL2xpbmsuZ3RzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVE9ETzogbWFrZSB0ZW1wbGF0ZS1vbmx5IGNvbXBvbmVudCxcbiAqIGFuZCB1c2UgY2xhc3MtYmFzZWQgbW9kaWZpZXI_XG4gKlxuICogVGhpcyB3b3VsZCByZXF1aXJlIHRoYXQgbW9kaWZpZXJzIGNvdWxkIHJ1biBwcmUtcmVuZGVyXG4gKi9cbmltcG9ydCB7IGhhc2ggfSBmcm9tICdAZW1iZXIvaGVscGVyJztcbmltcG9ydCB7IG9uIH0gZnJvbSAnQGVtYmVyL21vZGlmaWVyJztcblxuaW1wb3J0IHsgbGluayB9IGZyb20gJy4uL2hlbHBlcnMvbGluay50cyc7XG5pbXBvcnQgeyBFeHRlcm5hbExpbmsgfSBmcm9tICcuL2V4dGVybmFsLWxpbmsuZ3RzJztcblxuaW1wb3J0IHR5cGUgeyBUT0MgfSBmcm9tICdAZW1iZXIvY29tcG9uZW50L3RlbXBsYXRlLW9ubHknO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNpZ25hdHVyZSB7XG4gIEVsZW1lbnQ6IEhUTUxBbmNob3JFbGVtZW50O1xuICBBcmdzOiB7XG4gICAgLyoqXG4gICAgICogdGhlIGBocmVmYCBzdHJpbmcgdmFsdWUgdG8gc2V0IG9uIHRoZSBhbmNob3IgZWxlbWVudC5cbiAgICAgKi9cbiAgICBocmVmOiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogV2hlbiBjYWxjdWxhdGluZyB0aGUgXCJhY3RpdmVcIiBzdGF0ZSBvZiB0aGUgbGluaywgeW91IG1heSBkZWNpZGVcbiAgICAgKiB3aGV0aGVyIG9yIG5vdCB5b3Ugd2FudCB0byBfcmVxdWlyZV8gdGhhdCBhbGwgcXVlcnkgcGFyYW1zIGJlIGNvbnNpZGVyZWQgKHRydWUpXG4gICAgICogb3Igc3BlY2lmeSBpbmRpdmlkdWFsIHF1ZXJ5IHBhcmFtcywgaWdub3JpbmcgYW55dGhpbmcgbm90IHNwZWNpZmllZC5cbiAgICAgKlxuICAgICAqIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogYGBgZ2pzIGxpdmUgcHJldmlld1xuICAgICAqIGltcG9ydCB7IExpbmsgfSBmcm9tICdlbWJlci1wcmltaXRpdmVzJztcbiAgICAgKlxuICAgICAqIDx0ZW1wbGF0ZT5cbiAgICAgKiAgIDxMaW5rIEBocmVmPVwiL1wiIEBpbmNsdWRlQWN0aXZlUXVlcnlQYXJhbXM9e3t0cnVlfX0gYXMgfGF8PlxuICAgICAqICAgICAuLi5cbiAgICAgKiAgIDwvTGluaz5cbiAgICAgKiA8L3RlbXBsYXRlPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogdGhlIGRhdGEtYWN0aXZlIHN0YXRlIGhlcmUgd2lsbCBvbmx5IGJlIFwidHJ1ZVwiIG9uXG4gICAgICogLSBgL2BcbiAgICAgKiAtIGAvP2Zvbz0yYFxuICAgICAqIC0gYC8_Zm9vPSZiYXI9YFxuICAgICAqXG4gICAgICovXG4gICAgaW5jbHVkZUFjdGl2ZVF1ZXJ5UGFyYW1zPzogdHJ1ZSB8IHN0cmluZ1tdO1xuICB9O1xuICBCbG9ja3M6IHtcbiAgICBkZWZhdWx0OiBbXG4gICAgICB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgaWYgdGhlIHBhc3NlZCBgaHJlZmAgaXMgcG9pbnRpbmcgdG8gYW4gZXh0ZXJuYWwgc2l0ZS5cbiAgICAgICAgICogVXNlZnVsIGlmIHlvdSB3YW50IHlvdXIgbGlua3MgdG8gaGF2ZSBhZGRpdGlvbmFsIGNvbnRleHQgZm9yIHdoZW5cbiAgICAgICAgICogYSB1c2VyIGlzIGFib3V0IHRvIGxlYXZlIHlvdXIgc2l0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogRm9yIGV4YW1wbGU6XG4gICAgICAgICAqXG4gICAgICAgICAqIGBgYGdqcyBsaXZlIHByZXZpZXdcbiAgICAgICAgICogaW1wb3J0IHsgTGluayB9IGZyb20gJ2VtYmVyLXByaW1pdGl2ZXMnO1xuICAgICAgICAgKlxuICAgICAgICAgKiBjb25zdCBNeUxpbmsgPSA8dGVtcGxhdGU-XG4gICAgICAgICAqICAgPExpbmsgQGhyZWY9e3tAaHJlZn19IGFzIHxhfD5cbiAgICAgICAgICogICAgIHt7eWllbGR9fVxuICAgICAgICAgKiAgICAge3sjaWYgYS5pc0V4dGVybmFsfX1cbiAgICAgICAgICogICAgICAg4p6aXG4gICAgICAgICAqICAgICB7ey9pZn19XG4gICAgICAgICAqICAgPC9MaW5rPlxuICAgICAgICAgKiA8L3RlbXBsYXRlPjtcbiAgICAgICAgICpcbiAgICAgICAgICogPHRlbXBsYXRlPlxuICAgICAgICAgKiAgIDxNeUxpbmsgQGhyZWY9XCJodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZ1wiPk1ETjwvTXlMaW5rPiAmbmJzcDsmbmJzcDtcbiAgICAgICAgICogICA8TXlMaW5rIEBocmVmPVwiL1wiPkhvbWU8L015TGluaz5cbiAgICAgICAgICogIDwvdGVtcGxhdGU-XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKi9cbiAgICAgICAgaXNFeHRlcm5hbDogYm9vbGVhbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljYXRlcyBpZiB0aGUgcGFzc2VkIGBocmVmYCBpcyAqYWN0aXZlKiwgb3IgdGhlIHVzZXIgaXMgb24gdGhlIHNhbWUgYmFzZXBhdGguXG4gICAgICAgICAqIFRoaXMgYWxsb3dzIGNvbnN1bWVycyB0byBzdHlsZSB0aGVpciBsaW5rIGlmIHRoZXkgd2lzaCBvciBzdHlsZSB0aGVpciB0ZXh0LlxuICAgICAgICAgKiBUaGUgYWN0aXZlIHN0YXRlIHdpbGwgYWxzbyBiZSBwcmVzZW50IG9uIGEgYGRhdGEtYWN0aXZlYCBhdHRyaWJ1dGUgb24gdGhlIGdlbmVyYXRlZCBhbmNob3IgdGFnLlxuICAgICAgICAgKlxuICAgICAgICAgKlxuICAgICAgICAgKiBGb3IgZXhhbXBsZVxuICAgICAgICAgKiBgYGBnanNcbiAgICAgICAgICogaW1wb3J0IHsgTGluaywgc2VydmljZSB9IGZyb20gJ2VtYmVyLXByaW1pdGl2ZXMnO1xuICAgICAgICAgKlxuICAgICAgICAgKiBjb25zdCBNeUxpbmsgPSA8dGVtcGxhdGU-XG4gICAgICAgICAqICAgPExpbmsgQGhyZWY9XCIuLi5cIj4gYXMgfGF8PlxuICAgICAgICAgKiAgICAgPHNwYW4gY2xhc3M9XCJ7e2lmIGEuaXNBY3RpdmUgJ3VuZGVybGluZSd9fVwiPlxuICAgICAgICAgKiAgICAge3t5aWVsZH19XG4gICAgICAgICAqICAgICA8L3NwYW4-XG4gICAgICAgICAqICAgPC9MaW5rPlxuICAgICAgICAgKiA8L3RlbXBsYXRlPlxuICAgICAgICAgKlxuICAgICAgICAgKiA8dGVtcGxhdGU-XG4gICAgICAgICAqIHt7I2xldCAoc2VydmljZSAncm91dGVyJykgYXMgfHJvdXRlcnx9fVxuICAgICAgICAgKiAgICAgPE15TGluayBAaHJlZj17e3JvdXRlci5jdXJyZW50VVJMfX0-VGhzIHBhZ2U8L015TGluaz4gJm5ic3A7Jm5ic3A7XG4gICAgICAgICAqICAgICA8TXlMaW5rIEBocmVmPVwiL1wiPkhvbWU8L015TGluaz5cbiAgICAgICAgICogICB7ey9sZXR9fVxuICAgICAgICAgKiAgPC90ZW1wbGF0ZT5cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqXG4gICAgICAgICAqIEJ5IGRlZmF1bHQsIHRoZSBxdWVyeSBwYXJhbXMgYXJlIG9taXR0ZWQgZnJvbSBgaXNBY3RpdmVgIGNhbGN1bGF0aW9uLCBidXQgeW91IG1heVxuICAgICAgICAgKiBjb25maWd1cmUgdGhlIHF1ZXJ5IHBhcmFtcyB0byBiZSBpbmNsdWRlZCBpZiB5b3Ugd2lzaFxuICAgICAgICAgKiBTZWU6IGBAaW5jbHVkZUFjdGl2ZVF1ZXJ5UGFyYW1zYFxuICAgICAgICAgKlxuICAgICAgICAgKiBOb3RlIHRoYXQgZXh0ZXJuYWwgbGlua3MgYXJlIG5ldmVyIGFjdGl2ZS5cbiAgICAgICAgICovXG4gICAgICAgIGlzQWN0aXZlOiBib29sZWFuO1xuICAgICAgfSxcbiAgICBdO1xuICB9O1xufVxuXG4vKipcbiAqIEEgbGlnaHQgd3JhcHBlciBhcm91bmQgdGhlIFtBbmNob3IgZWxlbWVudF1bbWRuLWFdLCB3aGljaCB3aWxsIGFwcHJvcHJpYXRlbHkgbWFrZSB5b3VyIGxpbmsgYW4gZXh0ZXJuYWwgbGluayBpZiB0aGUgcGFzc2VkIGBAaHJlZmAgaXMgbm90IG9uIHRoZSBzYW1lIGRvbWFpbi5cbiAqXG4gKlxuICogW21kbi1hXTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L2FcbiAqL1xuZXhwb3J0IGNvbnN0IExpbms6IFRPQzxTaWduYXR1cmU-ID0gPHRlbXBsYXRlPlxuICB7eyNsZXQgKGxpbmsgQGhyZWYgaW5jbHVkZUFjdGl2ZVF1ZXJ5UGFyYW1zPUBpbmNsdWRlQWN0aXZlUXVlcnlQYXJhbXMpIGFzIHxsfH19XG4gICAge3sjaWYgbC5pc0V4dGVybmFsfX1cbiAgICAgIDxFeHRlcm5hbExpbmsgaHJlZj17e0BocmVmfX0gLi4uYXR0cmlidXRlcz5cbiAgICAgICAge3t5aWVsZCAoaGFzaCBpc0V4dGVybmFsPXRydWUgaXNBY3RpdmU9ZmFsc2UpfX1cbiAgICAgIDwvRXh0ZXJuYWxMaW5rPlxuICAgIHt7ZWxzZX19XG4gICAgICA8YVxuICAgICAgICBkYXRhLWFjdGl2ZT17e2wuaXNBY3RpdmV9fVxuICAgICAgICBocmVmPXt7aWYgQGhyZWYgQGhyZWYgXCIjI21pc3NpbmcjI1wifX1cbiAgICAgICAge3tvbiBcImNsaWNrXCIgbC5oYW5kbGVDbGlja319XG4gICAgICAgIC4uLmF0dHJpYnV0ZXNcbiAgICAgID5cbiAgICAgICAge3t5aWVsZCAoaGFzaCBpc0V4dGVybmFsPWZhbHNlIGlzQWN0aXZlPWwuaXNBY3RpdmUpfX1cbiAgICAgIDwvYT5cbiAgICB7ey9pZn19XG4gIHt7L2xldH19XG48L3RlbXBsYXRlPjtcblxuZXhwb3J0IGRlZmF1bHQgTGluaztcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FLQztBQUNELFNBQVMsSUFBSSxRQUFRLGdCQUFnQjtBQUNyQyxTQUFTLEVBQUUsUUFBUSxrQkFBa0I7QUFFckMsU0FBUyxJQUFJLFFBQVEscUJBQXFCO0FBQzFDLFNBQVMsWUFBWSxRQUFRLHNCQUFzQjtBQUVuRCxjQUFjLEdBQUcsUUFBUSxpQ0FBaUM7QUFFMUQsaUJBQWlCO0lBQ2YsU0FBUztJQUNUO1FBQ0U7O0tBRUMsR0FDRCxNQUFNLE1BQU07UUFDWjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQXNCQyxHQUNELDJCQUEyQixJQUFJLEdBQUcsTUFBTTs7SUFFMUM7UUFDRTtnQkFFSTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1NBd0JDLEdBQ0QsWUFBWSxPQUFPO2dCQUNuQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztTQStCQyxHQUNELFVBQVUsT0FBTzs7OztBQU16Qjs7Ozs7Q0FLQyxHQUNELE9BQU8sTUFBTSxNQUFNLElBQUksYUFBYSxTQUFVLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUI5QyxDQUFBLEVBQUE7SUFBQTtRQUFBLE9BQUEsS0FBQSxTQUFBLENBQUEsRUFBVztJQUFEO0FBQUEsR0FBRTtBQUVaLGVBQWUsS0FBSyJ9"],"names":["Link","setComponentTemplate","precompileTemplate","scope","link","ExternalLink","hash","on","strictMode","templateOnly"],"mappings":";;;;;;;;AAAA;;;;;;AAiHA;;;;;;MAMaA,IAAU,GAAAC,oBAAA,CAAaC,kBAAA,CAiBpC,ieAAA,EAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,IAAA;IAAAC,YAAA;IAAAC,IAAA;AAAAC,IAAAA,EAAAA;AAAA,GAAA,CAAA;EAAAC,UAAA,EAAA,IAAA;AAAU,CAAA,CAAA,EAAAC,YAAA,EAAA;;;;"}
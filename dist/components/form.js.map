{"version":3,"file":"form.js","sources":["../../src/components/form.gts"],"sourcesContent":["import { template } from \"@ember/template-compiler\";\nimport { assert } from '@ember/debug';\nimport { fn } from '@ember/helper';\nimport { on } from '@ember/modifier';\nimport type { TOC } from '@ember/component/template-only';\ntype FormDataEntryValue = NonNullable<ReturnType<FormData['get']>>;\ntype Data = {\n    [key: string]: FormDataEntryValue;\n};\nconst handleInput = (onChange1: (data: Data, eventType: 'input' | 'submit', event: Event) => void, event1: Event | SubmitEvent, eventType1: 'input' | 'submit' = 'input')=>{\n    assert('An unexpected event was passed to handleInput in <Form>', 'currentTarget' in event1 && event1.currentTarget instanceof HTMLFormElement);\n    let formData1 = new FormData(event1.currentTarget);\n    let data1 = Object.fromEntries(formData1.entries());\n    onChange1(data1, eventType1, event1);\n};\nconst handleSubmit = (onChange1: (data: Data, eventType: 'input' | 'submit', event: Event | SubmitEvent) => void, event1: SubmitEvent)=>{\n    event1.preventDefault();\n    handleInput(onChange1, event1, 'submit');\n};\nexport interface Signature {\n    Element: HTMLFormElement;\n    Args: {\n        /**\n     *  Any time the value of any field is changed this function will be called.\n     */ onChange: (/**\n       * The data from the form as an Object of `{ [field name] => value }` pairs.\n       * This is generated from the native [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData)\n       *\n       * Additional fields/inputs/controls can be added to this data by specifying a\n       * \"name\" attribute.\n       */ data: Data, /**\n       * Indicates whether the `onChange` function was called from the `input` or `submit` event handlers.\n       */ eventType: 'input' | 'submit', /**\n       * The raw event, if needed.\n       */ event: Event | SubmitEvent) => void;\n    };\n    Blocks: {\n        /**\n     * The main content for the form. This is where inputs / fields / controls would go.\n     * Within the `<form>` content, `<button type=\"submit\">` will submit the form, which\n     * triggers the `@onChange` event.\n     */ default: [];\n    };\n}\nexport const Form: TOC<Signature> = template(`\n  <form\n    {{on \"input\" (fn handleInput @onChange)}}\n    {{on \"submit\" (fn handleSubmit @onChange)}}\n    ...attributes\n  >\n    {{yield}}\n  </form>\n`, {\n    eval () {\n        return eval(arguments[0]);\n    }\n});\nexport default Form;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3JrL2VtYmVyLXByaW1pdGl2ZXMvZW1iZXItcHJpbWl0aXZlcy9lbWJlci1wcmltaXRpdmVzL3NyYy9jb21wb25lbnRzL2Zvcm0uZ3RzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BlbWJlci9kZWJ1Zyc7XG5pbXBvcnQgeyBmbiB9IGZyb20gJ0BlbWJlci9oZWxwZXInO1xuaW1wb3J0IHsgb24gfSBmcm9tICdAZW1iZXIvbW9kaWZpZXInO1xuXG5pbXBvcnQgdHlwZSB7IFRPQyB9IGZyb20gJ0BlbWJlci9jb21wb25lbnQvdGVtcGxhdGUtb25seSc7XG5cbnR5cGUgRm9ybURhdGFFbnRyeVZhbHVlID0gTm9uTnVsbGFibGU8UmV0dXJuVHlwZTxGb3JtRGF0YVsnZ2V0J10-PjtcbnR5cGUgRGF0YSA9IHsgW2tleTogc3RyaW5nXTogRm9ybURhdGFFbnRyeVZhbHVlIH07XG5cbmNvbnN0IGhhbmRsZUlucHV0ID0gKFxuICBvbkNoYW5nZTogKGRhdGE6IERhdGEsIGV2ZW50VHlwZTogJ2lucHV0JyB8ICdzdWJtaXQnLCBldmVudDogRXZlbnQpID0-IHZvaWQsXG4gIGV2ZW50OiBFdmVudCB8IFN1Ym1pdEV2ZW50LFxuICBldmVudFR5cGU6ICdpbnB1dCcgfCAnc3VibWl0JyA9ICdpbnB1dCdcbikgPT4ge1xuICBhc3NlcnQoXG4gICAgJ0FuIHVuZXhwZWN0ZWQgZXZlbnQgd2FzIHBhc3NlZCB0byBoYW5kbGVJbnB1dCBpbiA8Rm9ybT4nLFxuICAgICdjdXJyZW50VGFyZ2V0JyBpbiBldmVudCAmJiBldmVudC5jdXJyZW50VGFyZ2V0IGluc3RhbmNlb2YgSFRNTEZvcm1FbGVtZW50XG4gICk7XG5cbiAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xuICBsZXQgZGF0YSA9IE9iamVjdC5mcm9tRW50cmllcyhmb3JtRGF0YS5lbnRyaWVzKCkpO1xuXG4gIG9uQ2hhbmdlKGRhdGEsIGV2ZW50VHlwZSwgZXZlbnQpO1xufTtcblxuY29uc3QgaGFuZGxlU3VibWl0ID0gKFxuICBvbkNoYW5nZTogKGRhdGE6IERhdGEsIGV2ZW50VHlwZTogJ2lucHV0JyB8ICdzdWJtaXQnLCBldmVudDogRXZlbnQgfCBTdWJtaXRFdmVudCkgPT4gdm9pZCxcbiAgZXZlbnQ6IFN1Ym1pdEV2ZW50XG4pID0-IHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgaGFuZGxlSW5wdXQob25DaGFuZ2UsIGV2ZW50LCAnc3VibWl0Jyk7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFNpZ25hdHVyZSB7XG4gIEVsZW1lbnQ6IEhUTUxGb3JtRWxlbWVudDtcbiAgQXJnczoge1xuICAgIC8qKlxuICAgICAqICBBbnkgdGltZSB0aGUgdmFsdWUgb2YgYW55IGZpZWxkIGlzIGNoYW5nZWQgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZC5cbiAgICAgKi9cbiAgICBvbkNoYW5nZTogKFxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgZGF0YSBmcm9tIHRoZSBmb3JtIGFzIGFuIE9iamVjdCBvZiBgeyBbZmllbGQgbmFtZV0gPT4gdmFsdWUgfWAgcGFpcnMuXG4gICAgICAgKiBUaGlzIGlzIGdlbmVyYXRlZCBmcm9tIHRoZSBuYXRpdmUgW0Zvcm1EYXRhXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRm9ybURhdGEpXG4gICAgICAgKlxuICAgICAgICogQWRkaXRpb25hbCBmaWVsZHMvaW5wdXRzL2NvbnRyb2xzIGNhbiBiZSBhZGRlZCB0byB0aGlzIGRhdGEgYnkgc3BlY2lmeWluZyBhXG4gICAgICAgKiBcIm5hbWVcIiBhdHRyaWJ1dGUuXG4gICAgICAgKi9cbiAgICAgIGRhdGE6IERhdGEsXG4gICAgICAvKipcbiAgICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBgb25DaGFuZ2VgIGZ1bmN0aW9uIHdhcyBjYWxsZWQgZnJvbSB0aGUgYGlucHV0YCBvciBgc3VibWl0YCBldmVudCBoYW5kbGVycy5cbiAgICAgICAqL1xuICAgICAgZXZlbnRUeXBlOiAnaW5wdXQnIHwgJ3N1Ym1pdCcsXG4gICAgICAvKipcbiAgICAgICAqIFRoZSByYXcgZXZlbnQsIGlmIG5lZWRlZC5cbiAgICAgICAqL1xuICAgICAgZXZlbnQ6IEV2ZW50IHwgU3VibWl0RXZlbnRcbiAgICApID0-IHZvaWQ7XG4gIH07XG4gIEJsb2Nrczoge1xuICAgIC8qKlxuICAgICAqIFRoZSBtYWluIGNvbnRlbnQgZm9yIHRoZSBmb3JtLiBUaGlzIGlzIHdoZXJlIGlucHV0cyAvIGZpZWxkcyAvIGNvbnRyb2xzIHdvdWxkIGdvLlxuICAgICAqIFdpdGhpbiB0aGUgYDxmb3JtPmAgY29udGVudCwgYDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPmAgd2lsbCBzdWJtaXQgdGhlIGZvcm0sIHdoaWNoXG4gICAgICogdHJpZ2dlcnMgdGhlIGBAb25DaGFuZ2VgIGV2ZW50LlxuICAgICAqL1xuICAgIGRlZmF1bHQ6IFtdO1xuICB9O1xufVxuXG5leHBvcnQgY29uc3QgRm9ybTogVE9DPFNpZ25hdHVyZT4gPSA8dGVtcGxhdGU-XG4gIDxmb3JtXG4gICAge3tvbiBcImlucHV0XCIgKGZuIGhhbmRsZUlucHV0IEBvbkNoYW5nZSl9fVxuICAgIHt7b24gXCJzdWJtaXRcIiAoZm4gaGFuZGxlU3VibWl0IEBvbkNoYW5nZSl9fVxuICAgIC4uLmF0dHJpYnV0ZXNcbiAgPlxuICAgIHt7eWllbGR9fVxuICA8L2Zvcm0-XG48L3RlbXBsYXRlPjtcblxuZXhwb3J0IGRlZmF1bHQgRm9ybTtcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsU0FBUyxNQUFNLFFBQVEsZUFBZTtBQUN0QyxTQUFTLEVBQUUsUUFBUSxnQkFBZ0I7QUFDbkMsU0FBUyxFQUFFLFFBQVEsa0JBQWtCO0FBRXJDLGNBQWMsR0FBRyxRQUFRLGlDQUFpQztLQUVyRCxxQkFBcUIsWUFBWSxXQUFXLFNBQVM7S0FDckQ7S0FBVSxLQUFLLE1BQU0sR0FBRzs7QUFFN0IsTUFBTSxjQUFjLENBQ2xCLFlBQVcsTUFBTSxNQUFNLFdBQVcsVUFBVSxVQUFVLE9BQU8sVUFBVSxJQUFJLEVBQzNFLFFBQU8sUUFBUSxhQUNmLFlBQVcsVUFBVSxXQUFXLE9BQU87SUFFdkMsT0FDRSwyREFDQSxtQkFBbUIsVUFBUyxPQUFNLGFBQWEsWUFBWTtJQUc3RCxJQUFJLFlBQVcsSUFBSSxTQUFTLE9BQU0sYUFBYTtJQUMvQyxJQUFJLFFBQU8sT0FBTyxXQUFXLENBQUMsVUFBUyxPQUFPO0lBRTlDLFVBQVMsT0FBTSxZQUFXO0FBQzVCO0FBRUEsTUFBTSxlQUFlLENBQ25CLFlBQVcsTUFBTSxNQUFNLFdBQVcsVUFBVSxVQUFVLE9BQU8sUUFBUSxnQkFBZ0IsSUFBSSxFQUN6RixRQUFPO0lBRVAsT0FBTSxjQUFjO0lBQ3BCLFlBQVksV0FBVSxRQUFPO0FBQy9CO0FBRUEsaUJBQWlCO0lBQ2YsU0FBUztJQUNUO1FBQ0U7O0tBRUMsR0FDRCxXQUNFOzs7Ozs7T0FNQyxHQUNELE1BQU0sTUFDTjs7T0FFQyxHQUNELFdBQVcsVUFBVSxVQUNyQjs7T0FFQyxHQUNELE9BQU8sUUFBUSxnQkFDWixJQUFJOztJQUVYO1FBQ0U7Ozs7S0FJQyxHQUNEOzs7QUFJSixPQUFPLE1BQU0sTUFBTSxJQUFJLGFBQWEsU0FBVSxDQUFBOzs7Ozs7OztBQVE5QyxDQUFBLEVBQUE7SUFBQTtRQUFBLE9BQUEsS0FBQSxTQUFBLENBQUEsRUFBVztJQUFEO0FBQUEsR0FBRTtBQUVaLGVBQWUsS0FBSyJ9"],"names":["handleInput","onChange1","event1","eventType1","assert","currentTarget","HTMLFormElement","formData1","FormData","data1","Object","fromEntries","entries","handleSubmit","preventDefault","Form","setComponentTemplate","precompileTemplate","scope","on","fn","strictMode","templateOnly"],"mappings":";;;;;;;AASA,MAAMA,WAAA,GAAcA,CAClBC,SAA2E,EAC3EC,MAAe,EACfC,UAAqB,GAAW,OAAO,KAAA;EAEvCC,MAAA,CACE,2DACA,eAAmBF,IAAAA,MAAA,IAASA,MAAA,CAAMG,aAAa,YAAYC,eAAA,CAAA,CAAA;AAG7D,EAAA,IAAIC,SAAA,GAAW,IAAIC,QAAA,CAASN,MAAA,CAAMG,aAAa,CAAA,CAAA;EAC/C,IAAII,KAAA,GAAOC,MAAA,CAAOC,WAAW,CAACJ,SAAA,CAASK,OAAO,EAAA,CAAA,CAAA;AAE9CX,EAAAA,SAAA,CAASQ,KAAA,EAAMN,UAAA,EAAWD,MAAA,CAAA,CAAA;AAC5B,CAAA,CAAA;AAEA,MAAMW,YAAA,GAAeA,CACnBZ,SAAyF,EACzFC,MAAO,KAAA;AAEPA,EAAAA,MAAA,CAAMY,cAAc,EAAA,CAAA;AACpBd,EAAAA,WAAA,CAAYC,SAAA,EAAUC,MAAA,EAAO,QAAA,CAAA,CAAA;AAC/B,CAAA,CAAA;MAqCaa,IAAU,GAAAC,oBAAA,CAAaC,kBAAA,CAQpC,gJAAA,EAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,EAAA;IAAAC,EAAA;IAAApB,WAAA;AAAAa,IAAAA,YAAAA;AAAA,GAAA,CAAA;EAAAQ,UAAA,EAAA,IAAA;AAAU,CAAA,CAAA,EAAAC,YAAA,EAAA;;;;"}